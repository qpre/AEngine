/* The A-Engine Core: 1395348727668 */(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=window.AEngine={},b=function(){function a(a){this._sender=a,this._subscribers=[]}return a.prototype._subscribers=null,a.prototype._sender=null,a.prototype.subscribe=function(a){return this._subscribers.push(a)},a.prototype.notify=function(a){var b,c,d,e;for(e=[],b=c=0,d=this._subscribers.length-1;d>=c;b=c+=1)e.push(this._subscribers[b](this._sender,a));return e},a}(),l.AEEvent=b,m=Object.freeze({ACTIVE:0,PAUSED:1}),c=function(a){function c(a,c,d,e){this._name=a,this._in=c,this._out=d,this._run=e,this._statusChangedEvent=new b(this),this._statusChangedEvent.subscribe(this.onStatusChanged)}return o(c,a),c.prototype._status=m.PAUSED,c.prototype._statusChangedEvent=null,c.prototype.notifyStatusChanged=function(){return this._statusChangedEvent.notify({status:this._status})},c.prototype.onStatusChanged=function(a,b){return console.log("status changed to :"+b.status)},c.prototype.setActive=function(){return this._status=m.ACTIVE,this.notifyStatusChanged()},c.prototype.setUnactive=function(){return this._status=m.PAUSED,this.notifyStatusChanged()},c.prototype["in"]=function(){return this._in()},c.prototype.out=function(){return this._out()},c.prototype.run=function(){return this._run()},c}(h),l.AEGamePhase=c,l.AEGamePhase.StatusEnum=m,d=function(a){function b(){this._phases={}}return o(b,a),b.prototype._phases=null,b.prototype._current=null,b.prototype.has=function(a){return this._phases.hasOwnProperty(a)?!0:!1},b.prototype.addPhase=function(a,b,d,e){return this.has(a)?console.error("Phase "+a+" already exists"):this._phases[a]=new c(a,b,d,e)},b.prototype.setCurrent=function(a){return this.has(a.toString())?(this._current=this._phases[a],this._current.setActive(),this._current["in"](),this._current.run()):console.error("No such phase: "+a)},b.prototype.transitionTo=function(a){return null===this._current?console.error("No current phase was set, can't transit from nowhere"):(this._current.out(),this._current.setUnactive(),this.setCurrent(a))},b}(i),l.AEGamePhaseManager=d,e=function(a){function b(){this._guids=[]}return o(b,a),b.prototype._guids=null,b.prototype.has=function(a){return this._guids.indexOf(a.toString())>-1?!0:!1},b.prototype.getGUID=function(){var a;return a=this.guid(),this.has(a)?a=this.getGUID():this._guids.push(a),a},b.prototype.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},b.prototype.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},b}(i),l.AEIdFactory=e,a=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.init=function(){},b}(h),l.AEController=a,g=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return o(c,a),c.prototype._propertyChangedEvent=null,c.prototype.init=function(){return this._propertyChangedEvent=new b(this)},c.prototype.get=function(a){return this[a]},c.prototype.set=function(a,b){return this[a]=b,this.notifyPropertyChanged(a)},c.prototype.notifyPropertyChanged=function(a){return this._propertyChangedEvent.notify({property:a})},c}(h),l.AEModel=g,j=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.init=function(){},b}(h),l.AEView=j,f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype._messages=null,b.prototype.post=function(a,b){return this._messages[a].push(b)},b.prototype.get=function(a){return this._messages[a]},b.prototype.flush=function(a){return this._messages[a]=[]},b}(k),l.AEMessageBox=f,h=function(){function a(){this._guid=l.AEIdFactory.getInstance().getGUID()}return a.prototype._guid=null,a.prototype.init=function(){},a.prototype.guid=function(){return this._guid},a.create=function(){var a,b;return a=this,b=new a,arguments.length>0?b.init(arguments):b.init(),b},a}(),l.AEObject=h,i=function(){function a(){}return a._instance=null,a.getInstance=function(){return this._instance||(this._instance=new this)},a}(),l.AESingleton=i,k=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype._worker=null,b.prototype.init=function(a){var b,c;return b=new Blob([a],{type:"application/javascript"}),c=URL.createObjectURL(b),this._worker=new Worker(c),URL.revokeObjectURL(c)},b.prototype.onMessage=function(a){return this._worker.onmessage=a},b.prototype.postMessage=function(a){return this._worker.postMessage(a)},b}(h),l.AEWorker=k}).call(this);